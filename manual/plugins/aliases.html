<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Haraka Manual &raquo; aliases</title>
    
    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.css" rel="stylesheet">

    <!-- Documentation extras -->
    <link href="/css/docs.css" rel="stylesheet">
    <link href="/css/pygments-manni.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="/js/html5shiv.js"></script>
      <script src="/js/respond.min.js"></script>
    <![endif]-->

    </head>
      <body class="bs-docs-home">
        <a class="sr-only" href="#content">Skip navigation</a>

        <!-- Docs master nav -->
        <header class="navbar navbar-inverse navbar-fixed-top bs-docs-nav" role="banner">
          <div class="container">
            <div class="navbar-header">
              <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a href="/" class="navbar-brand">Haraka</a>
            </div>
            <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
              <ul class="nav navbar-nav">
                <li>
                  <a href="/about.html">About</a>
                </li>
                <li>
                  <a href="/community.html">Community</a>
                </li>
                <li>
                  <a href="/users.html">Known Users</a>
                </li>
                <li>
                  <a href="https://github.com/baudehlo/Haraka">Source on Github</a>
                </li>
                <li class="active">
                  <a href="/manual.html">Manual</a>
                </li>
              </ul>
            </nav>
          </div>
        </header>
        
        <!-- Docs page layout -->
        <div class="bs-header" id="content">
          <div class="container">
            <h1>aliases</h1>
          </div>
        </div>
        
        <div class="container bs-docs-container">
          <div class="row">
            <div class="col-md-3">
              <div id="chapternav" class="bs-sidebar hidden-print" role="complementary">
                <ul class="nav bs-sidenav"><li><a class="submenu" data-toggle="collapse" data-target="#core" data-parent="#chapternav" href="javascript:void(null);">Core</a>
<ul id='core' class='nav'>
<li><a href='/README.html'>Haraka</a></li>
<li><a href='/manual/Address.html'>Address Object</a></li>
<li><a href='/manual/Body.html'>Body Object</a></li>
<li><a href='/manual/Config.html'>Config Files</a></li>
<li><a href='/manual/Connection.html'>Connection Object</a></li>
<li><a href='/manual/CoreConfig.html'>Core Configuration Files</a></li>
<li><a href='/manual/CustomReturnCodes.html'>Custom Return Codes</a></li>
<li><a href='/manual/HAProxy.html'>HAProxy PROXY protocol extension support</a></li>
<li><a href='/manual/Header.html'>Header Object</a></li>
<li><a href='/manual/Logging_API.html'>Logging API</a></li>
<li><a href='/manual/Net_Utils.html'>Net_Utils</a></li>
<li><a href='/manual/Outbound.html'>Outbound Mail with Haraka</a></li>
<li><a href='/manual/Plugins.html'>Writing Haraka Plugins</a></li>
<li><a href='/manual/Transaction.html'>Transaction Object</a></li>
</ul></li>
<li><a class="submenu" data-toggle="collapse" data-target="#tutorials" data-parent="#chapternav" href="javascript:void(null);">Tutorials</a>
<ul id='tutorials' class='nav'>
<li><a href='/manual/Tutorial.html'>Writing Haraka Plugins</a></li>
<li><a href='/manual/tutorials/Migrating_from_v1_to_v2.html'>Migrating from Haraka v1.x to v2.x</a></li>
<li><a href='/manual/tutorials/SettingUpOutbound.html'>Configuring Haraka For Outbound Email</a></li>
</ul></li>
<li><a class="submenu" data-toggle="collapse" data-target="#plugins" data-parent="#chapternav" href="javascript:void(null);">Plugins</a>
<ul id='plugins' class='nav'>
<li><a href='/manual/plugins/auth/auth_ldap.html'>auth/auth_ldap</a></li>
<li><a href='/manual/plugins/auth/auth_proxy.html'>auth/auth_proxy</a></li>
<li><a href='/manual/plugins/auth/flat_file.html'>auth/flat_file</a></li>
<li><a href='/manual/plugins/queue/deliver.html'>queue/deliver</a></li>
<li><a href='/manual/plugins/queue/discard.html'>discard</a></li>
<li><a href='/manual/plugins/queue/qmail-queue.html'>queue/qmail-queue</a></li>
<li><a href='/manual/plugins/queue/quarantine.html'>quarantine</a></li>
<li><a href='/manual/plugins/queue/smtp_forward.html'>queue/smtp_forward</a></li>
<li><a href='/manual/plugins/queue/smtp_proxy.html'>queue/smtp_proxy</a></li>
<li class="active"><a href='/manual/plugins/aliases.html'>aliases</a></li>
<li><a href='/manual/plugins/attachment.html'>attachment</a></li>
<li><a href='/manual/plugins/avg.html'>avg</a></li>
<li><a href='/manual/plugins/block_me.html'>block_me</a></li>
<li><a href='/manual/plugins/bounces.html'>bounce</a></li>
<li><a href='/manual/plugins/clamd.html'>clamd</a></li>
<li><a href='/manual/plugins/connect.geoip.html'>geoip</a></li>
<li><a href='/manual/plugins/connect.p0f.html'>connect.p0f - A TCP Fingerprinting Plugin</a></li>
<li><a href='/manual/plugins/connect.rdns_access.html'>connect.rdns_access</a></li>
<li><a href='/manual/plugins/daemonize.html'>daemonize</a></li>
<li><a href='/manual/plugins/data.headers.html'>data.headers</a></li>
<li><a href='/manual/plugins/data.nomsgid.html'>data.nomsgid</a></li>
<li><a href='/manual/plugins/data.noreceived.html'>data.noreceived</a></li>
<li><a href='/manual/plugins/data.rfc5322_header_checks.html'>data.rfc5322_header_checks</a></li>
<li><a href='/manual/plugins/data.signatures.html'>data.signatures</a></li>
<li><a href='/manual/plugins/data.uribl.html'>data.uribl</a></li>
<li><a href='/manual/plugins/delay_deny.html'>delay_deny</a></li>
<li><a href='/manual/plugins/dkim_sign.html'>dkim_sign</a></li>
<li><a href='/manual/plugins/dnsbl.html'>dnsbl</a></li>
<li><a href='/manual/plugins/dnswl.html'>dnswl</a></li>
<li><a href='/manual/plugins/early_talker.html'>early_talker</a></li>
<li><a href='/manual/plugins/graph.html'>graph</a></li>
<li><a href='/manual/plugins/helo.checks.html'>helo.checks</a></li>
<li><a href='/manual/plugins/karma.html'>karma - reward good and penalize bad mail senders</a></li>
<li><a href='/manual/plugins/log.syslog.html'>log.syslog</a></li>
<li><a href='/manual/plugins/lookup_rdns.strict.html'>lookup_rdns.strict</a></li>
<li><a href='/manual/plugins/mail_from.access.html'>mail_from.access</a></li>
<li><a href='/manual/plugins/mail_from.blocklist.html'>mail_from.blocklist</a></li>
<li><a href='/manual/plugins/mail_from.is_resolvable.html'>mail_from.is_resolvable</a></li>
<li><a href='/manual/plugins/mail_from.nobounces.html'>mail_from.nobounces</a></li>
<li><a href='/manual/plugins/max_unrecognized_commands.html'>max_unrecognized_commands</a></li>
<li><a href='/manual/plugins/messagesniffer.html'>messagesniffer</a></li>
<li><a href='/manual/plugins/process_title.html'>process_title</a></li>
<li><a href='/manual/plugins/rate_limit.html'>rate_limit</a></li>
<li><a href='/manual/plugins/rcpt_to.access.html'>rcpt_to.access</a></li>
<li><a href='/manual/plugins/rcpt_to.blocklist.html'>rcpt_to.blocklist</a></li>
<li><a href='/manual/plugins/rcpt_to.in_host_list.html'>rcpt_to.in_host_list</a></li>
<li><a href='/manual/plugins/rcpt_to.max_count.html'>rcpt_to.max_count</a></li>
<li><a href='/manual/plugins/rcpt_to.qmail_deliverable.html'>qmail_deliverable</a></li>
<li><a href='/manual/plugins/rdns.regexp.html'>rdns.regexp</a></li>
<li><a href='/manual/plugins/relay_acl.html'>relay_acl</a></li>
<li><a href='/manual/plugins/relay_all.html'>relay_all</a></li>
<li><a href='/manual/plugins/relay_force_routing.html'>relay_force_routing.js</a></li>
<li><a href='/manual/plugins/reseed_rng.html'>reseed_rng</a></li>
<li><a href='/manual/plugins/spamassassin.html'>spamassassin</a></li>
<li><a href='/manual/plugins/spf.html'>spf</a></li>
<li><a href='/manual/plugins/tarpit.html'>tarpit</a></li>
<li><a href='/manual/plugins/tls.html'>tls</a></li>
<li><a href='/manual/plugins/toobusy.html'>toobusy</a></li>
<li><a href='/manual/plugins/xclient.html'>XCLIENT</a></li>
</ul></li></ul>

              </div>
            </div>
            
            <div class="col-md-9" role="main">
              <div class="bs-docs-section">
                <h1>aliases</h1>

<p>This plugin allows one to configure aliases that may perform an action or
change the RCPT address in a number of ways.  All aliases are specified in
a JSON formatted configuration file, and must have at very least an action.
Any syntax error found in the JSON format config file will stop the server
from running.</p>

<p>WARNING: DO NOT USE THIS PLUGIN WITH queue/smtp_proxy.</p>

<h2>Configuration</h2>

<ul>
<li><p>aliases</p>

<p>JSON formatted configuration file that must contain, at very least, a key
to match against RCPT address, and a value that is an associative array
with an "action" : "<action>" key, value pair.  An example:</p>

<pre><code>{ "test1" : { "action" : "drop" } }
</code></pre>

<p>In the above example the "test1" alias will drop any message that matches
test1, or test1-* (wildcard '-', see below).  Actions may in turn have 0 or
more options listed with them like so:</p>

<pre><code>{ "test3" : { "action" : "alias", "to" : "test3-works" } }
</code></pre>

<p>In the above example the "test3" alias has an action of "alias", and
a required "to" field.  If this "to" field were missing the alias would
fail to run, and an error would be printed in the logs.</p>

<ul>
<li><p>wildcard '-' notation</p>

<p>In an effort to match some of the functionality of other alias parsers
we've allowed wildcard matching of the alias against the right most
string of a RCPT address.  That is, if our address were
test2-testing@example.com, the below alias would match:</p>

<pre><code>{ "test2" : { "action" : "drop" } }
</code></pre>

<p>The larger, and more specific alias, should always match first when
using wildcard '-' notation.  So if the above RCPT were put up against
this alias config, it would not drop, but rather map to another
address:</p>

<pre><code>{
    "test2" : { "action" : "drop" },
    "test2-testing" : { "action" : "alias", "to" : "test@foo.com" }
}
</code></pre></li>
<li><p>chaining and circuits</p>

<p>In short, we do not allow chaining of aliases at this time.  As a
side-effect, we enjoy protections against alias circuits.</p></li>
<li><p>optional one line formatting</p>

<p>Any valid JSON will due, however, please consider keeping each alias
on its own line so that others that wish to grep the aliases file
have an easier time finding the full configuration for an alias.</p></li>
<li><p>nondeterministic duplicate matches</p>

<p>This plugin was written with speed in mind.  That means every lookup
hashes into the alias file for its match.  While the act of doing so
is fast, it does mean that any duplicate alias entries will match
nondeterministically.  That is, we cannot predict what will happen
here:</p>

<pre><code>{
    "coinflip" : { "action" : "alias", "to" : "heads@coin.com" },
    "coinflip" : { "action" : "alias", "to" : "tails@coin.com" }
}
</code></pre>

<p>Truth be told, one result will likely always be chosen over the other,
so this is not exactly a coinflip.  We simply cannot say what the
language implementation will do here, it could change tomorrow.</p></li>
</ul></li>
<li><p>action (required)</p>

<p>The following is a list of supported actions, and the options they require.</p>

<ul>
<li><p>drop</p>

<p>This action simply drops a message, while pretending everything was
okay to the sender.  This acts much like an alias to /dev/null in
other servers.</p></li>
<li><p>alias</p>

<p>This action will map the alias key to the address specified in the
"to" option.  A note about matching in addition to the note
about wildcard '-' above.  When we match an alias, we store the
hostname of the match for a shortcut substitution syntax later. </p>

<ul>
<li><p>to (required)</p>

<p>This option is the full address, or local part at matched hostname
that the RCPT address will be re-written to.  For an example of
an alias to a full address consider the following: </p>

<pre><code>{ "test5" : { "action" : "alias", "to" : "test5@foo.com" } }
</code></pre>

<p>This will map RCPT matches for "test5" to "test5-works@foo.com".
This would map "test5@somedomain.com" to "test5-works@foo.com"
every time.  Now compare this notation with its shortcut
counterpart, best used when the "to" address is at the same
domain as the match:</p>

<pre><code>{ "test4" : { "action" : "alias", "to" : "test4" } }
</code></pre>

<p>Clearly, this notation is more compact, but what does it do.  Well,
mail to "test4-foo@anydomain.com" will map to "test4@anydomain.com".
One can see the clear benefit of using this notation with lots of
aliases on a single domain that map to other local parts at the
same domain.</p></li>
</ul></li>
</ul></li>
</ul>

<h2>Example Configuration</h2>

<p>{
    "test1" : { "action" : "drop" },
    "test2" : { "action" : "drop" },
    "test3" : { "action" : "alias", "to" : "test3-works" },
    "test4" : { "action" : "alias", "to" : "test4" },
    "test5" : { "action" : "alias", "to" : "test5-works@success.com" },
    "test6" : { "action" : "alias", "to" : "test6-works@success.com" }
}</p>

              </div>
            </div>
          </div>
        </div>

        <footer class="container" role="contentinfo">
            <ul class="bs-masthead-links">
            <li>
            <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
            <input type="hidden" name="cmd" value="_s-xclick">
            <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
            ">
            <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
            <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
            </form>
            </li>
            </ul>
        </footer>
        
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="/js/jquery.js"></script>
        <script src="/js/bootstrap.js"></script>
        <script src="/js/holder.js"></script>
        <!-- <script src="/js/application.js"></script> -->
        <script>
        $('.bs-sidebar ul ul').each(function (i, el) {
            if (!$(el).find('li.active').length) {
                $(el).collapse('toggle');
            }
        });
        $('a.submenu').on('touchstart', function(e) { e.stopPropagation(); });
        </script>

    </body>
</html>
